import Foundation

public struct CalendarManager {
    
    public static func getMonth(from date:Date) -> Int {
        return Calendar.current.component(.month, from: date)
    }
    
    public static func getLunarDateString(from date:Date) -> String {
        let lunar = CalendarManager.getLunarDate(from: date)
        var result = "\(lunar.monthStr)\(lunar.dayStr)"
        if lunar.isLeapMonth {
            result = "闰" + result
        }
        return result
    }
    
    public static func getMonthDay(from date:Date) -> String {
        let formatter = DateFormatter()
        //        formatter.timeZone = TimeZone(identifier: "Asia/Shanghai") // 东八区的标准时区标识符
        formatter.dateFormat = "MM.dd"
        let monthDay = formatter.string(from: date)
        return monthDay
    }
    
    public static func getWeekday(from date:Date) -> String {
        let formatter = DateFormatter()
        //        formatter.timeZone = TimeZone(identifier: "Asia/Shanghai") // 东八区的标准时区标识符
        formatter.locale = Locale(identifier: "zh_CN")
        let weekdayNumber = Calendar.current.component(.weekday, from: date)
        let weekdaySymbols = ["日", "一", "二", "三", "四", "五", "六"]
        return "周" + weekdaySymbols[weekdayNumber - 1]
    }
    
    public static func getTodayInUTC8() -> Date {
        let utcDate = Date() // UTC 时间（设备当前时间）
        let timeInterval = TimeInterval(TimeZone(identifier: "Asia/Shanghai")!.secondsFromGMT())
        return utcDate.addingTimeInterval(timeInterval) // 转换为东八区的UTC时间
    }
    
    public static func getLunarDate(from date: Date) -> (month: Int, day: Int, monthStr: String, dayStr: String, isLeapMonth: Bool) {
        let calendar = Calendar(identifier: .chinese)
        let components = calendar.dateComponents([.year, .month, .day], from: date)
        let month = components.month ?? 1
        let day = components.day ?? 1
        let isLeapMonth = calendar.dateComponents([.yearForWeekOfYear], from: date).isLeapMonth ?? false
        
        // 农历月份
        let lunarMonths = [
            "正月", "二月", "三月", "四月", "五月", "六月",
            "七月", "八月", "九月", "十月", "冬月", "腊月"
        ]
        
        // 农历日期
        let lunarDays = [
            "初一", "初二", "初三", "初四", "初五", "初六", "初七", "初八", "初九", "初十",
            "十一", "十二", "十三", "十四", "十五", "十六", "十七", "十八", "十九", "二十",
            "廿一", "廿二", "廿三", "廿四", "廿五", "廿六", "廿七", "廿八", "廿九", "三十"
        ]
        
        let monthStr = lunarMonths[month - 1]
        let dayStr = lunarDays[day - 1]
        
        return (month, day, monthStr, dayStr, isLeapMonth)
    }
    
    private static let houList = [
        // 立春
        "东风解冻", "蛰虫始振", "鱼陟负冰",
        // 雨水
        "獭祭鱼", "鸿雁来", "草木萌动",
        // 惊蛰
        "桃始华", "仓庚鸣", "鹰化为鸠",
        // 春分
        "玄鸟至", "雷乃发声", "始电",
        // 清明
        "桐始华", "田鼠化为鴽", "虹始见",
        // 谷雨
        "萍始生", "鸣鸠拂其羽", "戴胜降于桑",
        // 立夏
        "蝼蝈鸣", "蚯蚸出", "王瓜生",
        // 小满
        "苦菜秀", "靡草死", "麦秋至",
        // 芒种
        "螳螂生", "鵙始鸣", "反舌无声",
        // 夏至
        "鹿角解", "蜩始鸣", "半夏生",
        // 小暑
        "温风至", "蟋蟀居壁", "鹰始挚",
        // 大暑
        "腐草为萤", "土润溽暑", "大雨时行",
        // 立秋
        "凉风至", "白露降", "寒蝉鸣",
        // 处暑
        "鹰乃祭鸟", "天地始肃", "禾乃登",
        // 白露
        "鸿雁来宾", "玄鸟归", "群鸟养羞",
        // 秋分
        "雷始收声", "蛰虫坯户", "水始涸",
        // 寒露
        "鸿雁来宾", "雀入大水为蛤", "菊有黄花",
        // 霜降
        "豺乃祭兽", "草木黄落", "蛰虫咸俯",
        // 立冬
        "水始冰", "地始冻", "雉入大水为蜃",
        // 小雪
        "虹藏不见", "天气上升地气下降", "闭塞而成冬",
        // 大雪
        "鹖鴠不鸣", "虎始交", "荔挺出",
        // 冬至
        "蚯蚸结", "麋角解", "水泉动",
        // 小寒
        "雁北乡", "鹊始巢", "雉雊",
        // 大寒
        "鸡始乳", "征鸟厉疾", "水泽腹坚"
    ]
    
    //倒影，落花，浮光，扶光，拾花（花枝45°入镜，垂下），探幽，寒酥，落英（落花），灵泽（下雨，反光）
    //春辰，木槿，松花，朱殷，延维，竹影，掠影，望舒，烟雨，框景，水墨，残阳，孤舟，倒影，明黄，
    //暮山紫，天青，莲红，蔚蓝，苏梅，晴山，杨妃
    //夕落（傍晚），碧落（天），水（灵渊），云（纤凝），星（白榆）
    
    //    春季
    //    立春（2月3日-5日）
    //    初候：东风解冻（冰雪消融）
    //    次候：蛰虫始振（冬眠昆虫苏醒）
    //    末候：鱼陟负冰（鱼游近冰层）
    
    //    雨水（2月18日-20日）
    //    初候：獭祭鱼（水獭捕鱼陈列）
    //    次候：候雁北（大雁北归）
    //    末候：草木萌动（植物发芽）
    
    //    惊蛰（3月5日-7日）
    //    初候：桃始华（桃花盛开）
    //    次候：仓庚鸣（黄鹂鸣叫）
    //    末候：鹰化为鸠（布谷鸟出现）※（古人对鸟类迁徙的误解）
    
    //    春分（3月20日-21日）
    //    初候：玄鸟至（燕子归来）
    //    次候：雷乃发声（春雷初响）
    //    末候：始电（闪电出现）
    
    //    清明（4月4日-6日）
    //    初候：桐始华（泡桐开花）
    //    次候：田鼠化为鴽（鹌鹑类活动）※（象征阴阳转化）
    //    末候：虹始见（彩虹显现）
    
    //    谷雨（4月19日-21日）
    //    初候：萍始生（浮萍生长）
    //    次候：鸣鸠拂其羽（斑鸠振翅）
    //    末候：戴胜降于桑（戴胜鸟栖桑树）
    
    //    夏季
    //    立夏（5月5日-7日）
    //    初候：蝼蝈鸣（蝼蛄鸣叫）
    //    次候：蚯蚓出（蚯蚓活动）
    //    末候：王瓜生（葫芦科植物生长）
    
    //    小满（5月20日-22日）
    //    初候：苦菜秀（苦菜开花）
    //    次候：靡草死（喜阴植物枯萎）
    //    末候：麦秋至（小麦成熟）
    
    //    芒种（6月5日-7日）
    //    初候：螳螂生（螳螂孵化）
    //    次候：鵙始鸣（伯劳鸟鸣叫）
    //    末候：反舌无声（百舌鸟停鸣）
    
    //    夏至（6月21日-22日）
    //    初候：鹿角解（鹿角脱落）
    //    次候：蜩始鸣（夏蝉鸣叫）
    //    末候：半夏生（药用植物生长）
    
    //    小暑（7月6日-8日）
    //    初候：温风至（暖风盛行）
    //    次候：蟋蟀居壁（蟋蟀避暑）
    //    末候：鹰始挚（幼鹰学飞）
    
    //    大暑（7月22日-24日）
    //    初候：腐草为萤（萤火虫孵化）※（古人误认为腐草化萤）
    //    次候：土润溽暑（土壤湿润闷热）
    //    末候：大雨时行（暴雨频繁）
    
    //    秋季
    //    立秋（8月7日-9日）
    //    初候：凉风至（秋风渐起）
    //    次候：白露降（清晨露水凝结）
    //    末候：寒蝉鸣（秋蝉鸣叫）
    
    //    处暑（8月22日-24日）
    //    初候：鹰乃祭鸟（鹰捕猎鸟类）
    //    次候：天地始肃（气候转凉）
    //    末候：禾乃登（谷物成熟）
    
    //    白露（9月7日-9日）
    //    初候：鸿雁来（大雁南飞）
    //    次候：玄鸟归（燕子南归）
    //    末候：群鸟养羞（鸟类储食）
    
    //    秋分（9月22日-24日）
    //    初候：雷始收声（雷声减少）
    //    次候：蛰虫坯户（昆虫筑穴）
    //    末候：水始涸（河流水位下降）
    
    //    寒露（10月8日-9日）
    //    初候：鸿雁来宾（候鸟迁徙高峰）
    //    次候：雀入大水为蛤（雀鸟减少）※（象征季节转化）
    //    末候：菊有黄华（菊花盛开）
    
    //    霜降（10月23日-24日）
    //    初候：豺乃祭兽（豺捕猎陈列）
    //    次候：草木黄落（植物凋零）
    //    末候：蛰虫咸俯（昆虫冬眠）
    
    //    冬季
    //    立冬（11月7日-8日）
    //    初候：水始冰（水面结冰）
    //    次候：地始冻（土地冻结）
    //    末候：雉入大水为蜃（野鸡减少）※（古人附会为鸟类化蚌）
    
    //    小雪（11月22日-23日）
    //    初候：虹藏不见（彩虹消失）
    //    次候：天气上升地气下降（冷热气流分层）
    //    末候：闭塞成冬（万物沉寂）
    
    //    大雪（12月6日-8日）
    //    初候：鹖鴠不鸣（寒号鸟停叫）
    //    次候：虎始交（老虎交配）
    //    末候：荔挺出（马蔺草萌芽）
    
    //    冬至（12月21日-23日）
    //    初候：蚯蚓结（蚯蚓蜷缩）
    //    次候：麋角解（麋鹿脱角）
    //    末候：水泉动（地下水流动）
    
    //    小寒（1月5日-7日）
    //    初候：雁北乡（大雁北飞预兆）
    //    次候：鹊始巢（喜鹊筑巢）
    //    末候：雉始雊（野鸡鸣叫）
    
    //    大寒（1月20日-21日）
    //    初候：鸡始乳（母鸡孵蛋）
    //    次候：征鸟厉疾（猛禽捕猎）
    //    末候：水泽腹坚（冰层厚实）
    
    // 2025年二十四节气的日期对照表
    private static let solarTerms2025: [(month: Int, day: Int, name: String)] = [
        (1, 5, "小寒"), (1, 20, "大寒"),
        (2, 3, "立春"), (2, 18, "雨水"),
        (3, 5, "惊蛰"), (3, 20, "春分"),
        (4, 5, "清明"), (4, 20, "谷雨"),
        (5, 5, "立夏"), (5, 21, "小满"),
        (6, 5, "芒种"), (6, 21, "夏至"),
        (7, 7, "小暑"), (7, 22, "大暑"),
        (8, 7, "立秋"), (8, 23, "处暑"),
        (9, 7, "白露"), (9, 23, "秋分"),
        (10, 8, "寒露"), (10, 23, "霜降"),
        (11, 7, "立冬"), (11, 22, "小雪"),
        (12, 7, "大雪"), (12, 21, "冬至")
    ]
    
    public static func getSolarTerm(for date: Date) -> String? {
        let calendar = Calendar.current
        let components = calendar.dateComponents([.month, .day], from: date)
        
        guard let month = components.month,
              let day = components.day else {
            return nil
        }
        
        // 查找对应的节气
        return solarTerms2025.first { $0.month == month && $0.day == day }?.name
    }
    
    // public static func getSolarTerm(for date: Date) -> String? {
    //     // 二十四节气对应的黄经度数（以春分点为起点的黄经度数）
    //     let solarTermDegrees: [(degree: Double, name: String)] = [
    //         (315, "立春"), (330, "雨水"),
    //         (345, "惊蛰"), (0, "春分"),
    //         (15, "清明"), (30, "谷雨"),
    //         (45, "立夏"), (60, "小满"),
    //         (75, "芒种"), (90, "夏至"),
    //         (105, "小暑"), (120, "大暑"),
    //         (135, "立秋"), (150, "处暑"),
    //         (165, "白露"), (180, "秋分"),
    //         (195, "寒露"), (210, "霜降"),
    //         (225, "立冬"), (240, "小雪"),
    //         (255, "大雪"), (270, "冬至"),
    //         (285, "小寒"), (300, "大寒")
    //     ]
    
    //     // 获取日期的儒略日（考虑东八区时差）
    //     func julianDay(from date: Date) -> Double {
    //         // 转换到东八区时间
    //         let calendar = Calendar(identifier: .gregorian)
    //         let timeZone = TimeZone(secondsFromGMT: 8 * 3600)! // 东八区
    //         let components = calendar.dateComponents([.year, .month, .day, .hour, .minute, .second], from: date)
    
    //         guard let year = components.year,
    //               let month = components.month,
    //               let day = components.day,
    //               let hour = components.hour,
    //               let minute = components.minute,
    //               let second = components.second else {
    //             return 0
    //         }
    
    //         var y = Double(year)
    //         var m = Double(month)
    //         // 加入时区偏移
    //         let d = Double(day) + (Double(hour) + 8.0 + Double(minute)/60.0 + Double(second)/3600.0)/24.0
    
    //         if m <= 2 {
    //             y -= 1
    //             m += 12
    //         }
    
    //         let a = floor(y / 100)
    //         let b = 2 - a + floor(a / 4)
    
    //         return floor(365.25 * (y + 4716)) + floor(30.6001 * (m + 1)) + d + b - 1524.5
    //     }
    
    //     // 计算太阳黄经
    //     func sunLongitude(julianDay jd: Double) -> Double {
    //         let t = (jd - 2451545.0) / 36525  // 儒略世纪数
    
    //         // 太阳平黄经
    //         let l0 = 280.46646 + 36000.76983 * t + 0.0003032 * t * t
    
    //         // 太阳中心差
    //         let m = 357.52911 + 35999.05029 * t - 0.0001537 * t * t
    
    //         // 地球轨道离心率
    //         let e = 0.016708634 - 0.000042037 * t - 0.0000001267 * t * t
    
    //         // 太阳方程
    //         let c = (1.914602 - 0.004817 * t - 0.000014 * t * t) * sin(m * .pi / 180)
    //             + (0.019993 - 0.000101 * t) * sin(2 * m * .pi / 180)
    //             + 0.000289 * sin(3 * m * .pi / 180)
    
    //         // 真黄经
    //         let lambda = l0 + c
    
    //         // 章动修正
    //         let omega = 125.04 - 1934.136 * t
    //         let lambda_true = lambda - 0.00569 - 0.00478 * sin(omega * .pi / 180)
    
    //         return lambda_true.truncatingRemainder(dividingBy: 360)
    //     }
    
    //     // 获取当前日期的太阳黄经
    //     let jd = julianDay(from: date)
    //     let sunLong = sunLongitude(julianDay: jd)
    
    //     // 检查是否是节气日期（允许0.5度的误差）
    //     for term in solarTermDegrees {
    //         let diff = abs(sunLong - term.degree)
    //         if diff < 0.5 || abs(diff - 360) < 0.5 {
    //             return term.name
    //         }
    //     }
    
    //     return nil
    // }
    
    //获取节日
    public static func getFestival(for date: Date) -> String? {
        let calendar = Calendar(identifier: .chinese)
        let components = calendar.dateComponents([.month, .day], from: date)
        
        // 农历节日对照表
        let lunarFestivals: [(month: Int, day: Int, name: String)] = [
            (1, 1, "春节"),
            (1, 15, "元宵节"),
            (2, 2, "龙抬头"),
            (5, 5, "端午节"),
            (7, 7, "七夕节"),
            (7, 15, "中元节"),
            (8, 15, "中秋节"),
            (9, 9, "重阳节"),
            (12, 8, "腊八节"),
            (12, 23, "小年"),
            (12, 30, "除夕")  // 需要特殊处理闰月和大小月的情况
        ]
        
        // 检查是否是农历节日
        if let month = components.month,
           let day = components.day,
           let festival = lunarFestivals.first(where: { $0.month == month && $0.day == day }) {
            return festival.name
        }
        
        // 检查是否是公历节日
        let gregorianCalendar = Calendar(identifier: .gregorian)
        let gregorianComponents = gregorianCalendar.dateComponents([.month, .day], from: date)
        
        // 公历节日对照表
        let gregorianFestivals: [(month: Int, day: Int, name: String)] = [
            (1, 1, "元旦"),
            (2, 14, "情人节"),
            (3, 8, "妇女节"),
            (4, 1, "愚人节"),
            (5, 1, "劳动节"),
            (6, 1, "儿童节"),
            (10, 1, "国庆节"),
            (12, 25, "圣诞节")
        ]
        
        // 检查是否是公历节日
        if let month = gregorianComponents.month,
           let day = gregorianComponents.day,
           let festival = gregorianFestivals.first(where: { $0.month == month && $0.day == day }) {
            return festival.name
        }
        
        // 特殊处理母亲节（5月第二个星期日）
        if gregorianComponents.month == 5 {
            let weekOfMonth = gregorianCalendar.component(.weekOfMonth, from: date)
            let weekday = gregorianCalendar.component(.weekday, from: date)
            if weekOfMonth == 2 && weekday == 1 {  // 第二个星期日
                return "母亲节"
            }
        }
        
        // 特殊处理父亲节（6月第三个星期日）
        if gregorianComponents.month == 6 {
            let weekOfMonth = gregorianCalendar.component(.weekOfMonth, from: date)
            let weekday = gregorianCalendar.component(.weekday, from: date)
            if weekOfMonth == 3 && weekday == 1 {  // 第三个星期日
                return "父亲节"
            }
        }
        
        return nil
    }
    
    public struct SolarTermPeriod {
        let termName: String    // 节气名，如"雨水"
        let rank: String      // 三候名，如"初候"
        let ordinal: String  // 候细分中的第几天，如"子"
        let phenomenon: String  // 候象名，如"獭祭鱼"
        let number: String
        let analysis: String    // 解析
        let storyLine: String // 5句故事线中的一句
    }
    
    static func getSolarTermPeriod(for date: Date) -> SolarTermPeriod? {
        let calendar = Calendar.current
        
        // 向前查找最近的节气
        var currentDate = date
        var currentTerm: (name: String, date: Date)? = nil
        //        var nextTerm: (name: String, date: Date)? = nil
        
        // 向前查找最近的节气
        for _ in 0..<15 {
            if let term = getSolarTerm(for: currentDate) {
                currentTerm = (term, currentDate)
                break
            }
            currentDate = calendar.date(byAdding: .day, value: -1, to: currentDate)!
        }
        
        // 向后查找下一个节气
        //        currentDate = date
        //        for _ in 0..<15 {
        //            if let term = getSolarTerm(for: currentDate) {
        //                if currentTerm == nil || currentDate > currentTerm!.date {
        //                    nextTerm = (term, currentDate)
        //                    break
        //                }
        //            }
        //            currentDate = calendar.date(byAdding: .day, value: 1, to: currentDate)!
        //        }
        
        let previousTerm = currentTerm
        //        guard let previousTerm = currentTerm,
        //              let nextTerm = nextTerm else { return nil }
        
        // 计算在哪一候
        let daysFromPrevious = (Calendar.current.dateComponents([.day], from: previousTerm!.date, to: date).day ?? 0) + 1
        let phase = min(3, ((daysFromPrevious - 1) / 5) + 1)
        
        // 计算在当前候的第几天
        let dayIndex = ((daysFromPrevious - 1) % 5)
        
        // 获取三候名称
        let rankNames = ["初候", "次候", "末侯"]
        let rank = rankNames[phase - 1]
        
        // 获取侯细分中的第几天
        let ordinalNumbers: [String] = ["子", "丑", "寅", "卯", "辰"]
        let ordinal: String = ordinalNumbers[dayIndex]
        
        // 获取详细信息
        if let phaseInfo = getPhaseDescription(term: previousTerm!.name, phase: phase) {
            return SolarTermPeriod(
                termName: previousTerm!.name,
                rank: rank,
                ordinal: ordinal,
                phenomenon: phaseInfo.phenomenon,
                number: phaseInfo.number,
                analysis: phaseInfo.analysis,
                storyLine: phaseInfo.storyLines[dayIndex]
            )
        }
        
        return nil
    }
    
    static func getPhaseDescription(term: String, phase: Int) -> (phenomenon: String, number: String, analysis: String, storyLines: [String])? {
        let phaseDescs: [String: [String: [String: Any]]] = [
            "立春": [
                "初候": ["东风解冻": [
                    "序号": "01",
                    "解析": "春风吹拂黄河流域，冰封大地融裂成块，裂缝中升起湿润水汽。《礼记》曰：天地解而雷雨作，雷雨作而百果草木皆甲坼",
                    "故事线": [
                        "子：东风拂面来，冰雪渐消融",
                        "丑：暖气浮青冢，寒冰化春泉",
                        "寅：解冻山河动，万物复苏时",
                        "卯：地脉传温意，冻土化春泥",
                        "辰：一夜东风至，千里冰消时"
                    ]
                ]],
                "次候": ["蛰虫始振": [
                    "序号": "02",
                    "解析": "洞穴中冬眠的蛇虫感受到地温回升，触角微颤但未出穴，甲骨文「辰」字即为此态",
                    "故事线": [
                        "子：地暖虫初醒，春风唤万灵",
                        "丑：蛰虫闻气动，蠢蠢欲出巢",
                        "寅：地脉传温意，蛰虫知节来",
                        "卯：春泥藏微动，万物共苏醒",
                        "辰：天机启蛰户，春色入虫窝"
                    ]
                ]],
                "末侯": ["鱼陟负冰": [
                    "序号": "03",
                    "解析": "河水表冰未全化，鱼群上浮时背脊顶开薄冰，形成锯齿状冰裂线",
                    "故事线": [
                        "子：冰消鱼渐动，春水暖鳞翔",
                        "丑：负冰寻暖处，游鱼贴水浮",
                        "寅：春江水渐暖，鱼戏白波间",
                        "卯：冰层裂纹起，鱼影掠春光",
                        "辰：水暖鱼知节，浮游贴冰层"
                    ]
                ]]
            ],
            "雨水": [
                "初候": ["獭祭鱼": [
                    "序号": "04",
                    "解析": "水獭捕鱼排列岸边的古老误会（实为进食前清洗猎物），古人视为开春吉兆",
                    "故事线": [
                        "子：晓江獭伏岸，鱼列如祭陈",
                        "丑：水寒鳞尚美，择鲜供晨餐",
                        "寅：冰消鱼渐活，春意暗中传",
                        "卯：獭爪分鱼肉，江畔留腥痕",
                        "辰：渔人知时至，撒网趁春温"
                    ]
                ]],
                "次候": ["鸿雁来": [
                    "序号": "05",
                    "解析": "迁徙大雁以'人'字队形掠过正在消融的黄河冰面，鸣声经冰原反射形成特殊混响",
                    "故事线": [
                        "子：云端雁字归，春风引翅轻",
                        "丑：北望故巢远，南去雪消融",
                        "寅：行行天际过，点点破晴空",
                        "卯：一声春讯至，唤醒万物生",
                        "辰：候鸟知时节，迁徙应春风"
                    ]
                ]],
                "末侯": ["草木萌动": [
                    "序号": "06",
                    "解析": "榆树韧皮部筛管开始输送去年储存的糖分，地衣假根分泌溶岩酸瓦解冻土",
                    "故事线": [
                        "子：远雷惊地脉，冻石隙生腥",
                        "丑：柔雨撬老根，蓁芽钻裂甲",
                        "寅：蜗涎蚀朽木，虫兽掣暗旗",
                        "卯：草衔绿发刃，四野沸阳息",
                        "辰：南风领万鞘，划破春分线"
                    ]
                ]]
            ],
            "惊蛰": [
                "初候": ["桃始华": [
                    "序号": "07",
                    "解析": "乍暖还寒时节，桃花最先绽放，粉红的花瓣点缀枝头，预示着春天的全面到来",
                    "故事线": [
                        "一夜东风暖，桃枝绽露华",
                        "春色先染树，粉红点翠芽",
                        "蜂蝶寻香至，晨露映朝霞",
                        "花开惊季节，春意满枝牙",
                        "东君唤万物，桃始报春华"
                    ]
                ]],
                "次候": ["仓庚鸣": [
                    "序号": "08",
                    "解析": "黄鹂鸟婉转啼鸣，为春日增添一抹动听的乐章，百鸟和鸣，春意盎然",
                    "故事线": [
                        "子：金衣织晓雾，婉转啼枝头",
                        "丑：翠羽映朝阳，清音破春寂",
                        "寅：百鸟随歌起，万木听曲生",
                        "卯：黄鹂弄清影，春色满林梢",
                        "仓庚知节序，啼醒百花开"
                    ]
                ]],
                "末侯": ["鹰化为鸠": [
                    "序号": "09",
                    "解析": "鹰的习性变得温和，如同鸽子一般，象征万物趋于和顺，春意正浓",
                    "故事线": [
                        "子：猛禽敛锐气，和风化戾气",
                        "丑：春晴鹰逐云，似鸠栖暖枝",
                        "寅：万物皆向善，四时得其宜",
                        "卯：凶戾随冬去，温柔伴春归",
                        "辰：天机藏玄妙，物性应时移"
                    ]
                ]]
            ],
            "春分": [
                "初候": ["玄鸟至": [
                    "序号": "10",
                    "解析": "燕子从南方飞来，预示着温暖的春天已经到来",
                    "故事线": [
                        "子：玄鸟衔泥至，春风引翅归",
                        "丑：旧巢添新土，双燕筑新居",
                        "寅：檐前呢喃语，春意满庭院",
                        "卯：晓看飞掠过，暮闻归巢鸣",
                        "辰：人间春已暖，燕子报新晴"
                    ]
                ]],
                "次候": ["雷乃发声": [
                    "序号": "11",
                    "解析": "春雷隆隆，唤醒了蛰伏的万物，预示着新一年农耕季节的开始",
                    "故事线": [
                        "子：春雷初响动，惊醒万物生",
                        "丑：云端雷鼓震，大地春声起",
                        "寅：电闪惊冬梦，雷鸣唤春归",
                        "卯：雨后新芽嫩，雷声助发芽",
                        "辰：天公施号令，万物各归位"
                    ]
                ]],
                "末候": ["始电": [
                    "序号": "12",
                    "解析": "春季第一道闪电划破天际，雷雨交加，滋润大地",
                    "故事线": [
                        "子：电光破暗夜，春雨润万物",
                        "丑：紫电劈云开，甘霖洒大地",
                        "寅：闪耀照春林，雷雨助农时",
                        "卯：电光春气动，万物竞生机",
                        "辰：天地齐发力，春耕正当时"
                    ]
                ]]
            ],
            "清明": [
                "初候": ["桐始华": [
                    "序号": "13",
                    "解析": "梧桐树开始开花，春意盎然",
                    "故事线": [
                        "子：桐花初绽放，春色满枝头",
                        "丑：嫩叶承朝露，新花沐晨风",
                        "寅：开花知节至，春深染绿阴",
                        "卯：桐影摇清晓，花香伴春来",
                        "辰：一树春光好，万物竞芳华"
                    ]
                ]],
                "次候": ["田鼠化为鴽": [
                    "序号": "14",
                    "解析": "春温转暖，田鼠藏匿，鹌鹑开始出现",
                    "故事线": [
                        "子：田鼠潜深处，鴽鸟出新春",
                        "丑：物候随时迁，春深意渐浓",
                        "寅：阡陌生新绿，禾苗吐嫩芽",
                        "卯：春耕农事忙，万物竞生长",
                        "辰：时节催新变，春光暖四方"
                    ]
                ]],
                "末候": ["虹始见": [
                    "序号": "15",
                    "解析": "春雨过后，天空开始出现彩虹，景色绚丽",
                    "故事线": [
                        "子：雨后虹光现，七彩挂天边",
                        "丑：春晴云渐散，彩桥跨碧空",
                        "寅：虹桥连天地，春色满人间",
                        "卯：雨过天更碧，虹霓映春光",
                        "辰：自然呈瑞象，万物展新颜"
                    ]
                ]]
            ],
            "谷雨": [
                "初候": ["萍始生": [
                    "序号": "16",
                    "解析": "水塘中浮萍开始生长，显示水温回暖",
                    "故事线": [
                        "子：春池浮萍绿，点点水面生",
                        "丑：微风拂水面，浮萍舞春波",
                        "寅：雨润新萍长，春深水更温",
                        "卯：一池春水暖，万绿竞相生",
                        "辰：水暖知时节，浮萍报春来"
                    ]
                ]],
                "次候": ["呜鸠拂其羽": [
                    "序号": "17",
                    "解析": "布谷鸟梳理羽毛，准备繁衍后代",
                    "故事线": [
                        "子：呜鸠理羽翎，春深催农事",
                        "丑：林间闻鸟语，春意正浓时",
                        "寅：拂羽知时至，鸣声报农忙",
                        "卯：春风送暖意，万物竞芳华",
                        "辰：布谷声声催，春耕莫迟疑"
                    ]
                ]],
                "末候": ["戴胜降于桑": [
                    "序号": "18",
                    "解析": "戴胜鸟飞到桑树上，预示着夏天即将来临",
                    "故事线": [
                        "子：戴胜栖桑树，春深近夏时",
                        "丑：桑林新绿茂，彩羽舞春风",
                        "寅：鸟语传春信，农家知节期",
                        "卯：春深农事忙，桑叶正当时",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "立夏": [
                "初候": ["蝼蝈鸣": [
                    "序号": "19",
                    "解析": "蝼蝈开始鸣叫，预示着夏季的开始",
                    "故事线": [
                        "子：蝼蝈初鸣时，春深近夏时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["蚯蚓出": [
                    "序号": "20",
                    "解析": "蚯蚓钻出地面，显示土壤温度升高",
                    "故事线": [
                        "子：春暖土气通，蚯蚓出泥中",
                        "丑：地温渐回暖，万物竞生长",
                        "寅：春深土脉动，生机遍大地",
                        "卯：春雨润泥土，蚯蚓舞春风",
                        "辰：时节催农事，春耕正当时"
                    ]
                ]],
                "末候": ["王瓜生": [
                    "序号": "21",
                    "解析": "王瓜开始生长，预示着夏季农事开始",
                    "故事线": [
                        "子：王瓜初发芽，夏意渐浓时",
                        "丑：新苗破土出，绿意满园春",
                        "寅：春深农事忙，瓜藤正当时",
                        "卯：春光催万物，生机遍大地",
                        "辰：农时不可误，春耕莫迟疑"
                    ]
                ]]
            ],
            "小满": [
                "初候": ["苦菜秀": [
                    "序号": "22",
                    "解析": "苦菜开始生长，预示着夏季农事开始",
                    "故事线": [
                        "子：苦菜初发芽，夏意渐浓时",
                        "丑：新苗破土出，绿意满园春",
                        "寅：春深农事忙，瓜藤正当时",
                        "卯：春光催万物，生机遍大地",
                        "辰：农时不可误，春耕莫迟疑"
                    ]
                ]],
                "次候": ["靡草死": [
                    "序号": "23",
                    "解析": "靡草开始死亡，预示着夏季农事开始",
                    "故事线": [
                        "子：靡草初死时，夏意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["鵙始鸣": [
                    "序号": "24",
                    "解析": "鵙鸟开始鸣叫，预示着夏季农事开始",
                    "故事线": [
                        "子：鵙鸟初鸣时，夏意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "芒种": [
                "初候": ["螳螂生": [
                    "序号": "25",
                    "解析": "螳螂开始生长，预示着夏季农事开始",
                    "故事线": [
                        "子：螳螂初生时，夏意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["鵙始鸣": [
                    "序号": "26",
                    "解析": "鵙鸟开始鸣叫，预示着夏季农事开始",
                    "故事线": [
                        "子：鵙鸟初鸣时，夏意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["反舌无声": [
                    "序号": "27",
                    "解析": "反舌鸟停止鸣叫，预示着夏季农事开始",
                    "故事线": [
                        "子：反舌无声时，夏意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "夏至": [
                "初候": ["鹿角解": [
                    "序号": "28",
                    "解析": "鹿角开始脱落，预示着夏季农事开始",
                    "故事线": [
                        "子：鹿角初解时，夏意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["蝉始鸣": [
                    "序号": "29",
                    "解析": "蝉开始鸣叫，预示着夏季农事开始",
                    "故事线": [
                        "子：蝉鸣初响时，夏意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["半夏生": [
                    "序号": "30",
                    "解析": "半夏开始生长，预示着夏季农事开始",
                    "故事线": [
                        "子：半夏初生时，夏意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "小暑": [
                "初候": ["温风至": [
                    "序号": "31",
                    "解析": "温风开始吹拂，预示着夏季农事开始",
                    "故事线": [
                        "子：温风初至时，夏意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["蟋蟀居壁": [
                    "序号": "32",
                    "解析": "蟋蟀开始在墙壁上鸣叫，预示着夏季农事开始",
                    "故事线": [
                        "子：蟋蟀初鸣时，夏意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["鹰始鸷": [
                    "序号": "33",
                    "解析": "鹰开始展翅高飞，预示着夏季农事开始",
                    "故事线": [
                        "子：鹰始鸷时，夏意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "大暑": [
                "初候": ["腐草为萤": [
                    "序号": "34",
                    "解析": "腐草化为萤火虫，预示着夏季农事开始",
                    "故事线": [
                        "子：腐草为萤时，夏意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["土润溽暑": [
                    "序号": "35",
                    "解析": "土壤湿润，预示着夏季农事开始",
                    "故事线": [
                        "子：土润溽暑时，夏意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["大雨时行": [
                    "序号": "36",
                    "解析": "大雨时行，预示着夏季农事开始",
                    "故事线": [
                        "子：大雨时行时，夏意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "立秋": [
                "初候": ["凉风至": [
                    "序号": "37",
                    "解析": "凉风开始吹拂，预示着秋季农事开始",
                    "故事线": [
                        "子：凉风初至时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["白露降": [
                    "序号": "38",
                    "解析": "白露开始降落，预示着秋季农事开始",
                    "故事线": [
                        "子：白露降时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["寒蝉鸣": [
                    "序号": "39",
                    "解析": "寒蝉开始鸣叫，预示着秋季农事开始",
                    "故事线": [
                        "子：寒蝉鸣时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "处暑": [
                "初候": ["鹰乃祭鸟": [
                    "序号": "40",
                    "解析": "鹰开始祭鸟，预示着秋季农事开始",
                    "故事线": [
                        "子：鹰乃祭鸟时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["天地始肃": [
                    "序号": "41",
                    "解析": "天地开始肃杀，预示着秋季农事开始",
                    "故事线": [
                        "子：天地始肃时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["禾乃登": [
                    "序号": "42",
                    "解析": "禾乃登，预示着秋季农事开始",
                    "故事线": [
                        "子：禾乃登时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "白露": [
                "初候": ["鸿雁来": [
                    "序号": "43",
                    "解析": "鸿雁开始飞来，预示着秋季农事开始",
                    "故事线": [
                        "子：鸿雁来时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["玄鸟归": [
                    "序号": "44",
                    "解析": "玄鸟开始归巢，预示着秋季农事开始",
                    "故事线": [
                        "子：玄鸟归时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["群鸟养羞": [
                    "序号": "45",
                    "解析": "群鸟开始养羞，预示着秋季农事开始",
                    "故事线": [
                        "子：群鸟养羞时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "秋分": [
                "初候": ["雷始收声": [
                    "序号": "46",
                    "解析": "雷开始收声，预示着秋季农事开始",
                    "故事线": [
                        "子：雷始收声时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["蛰虫坯户": [
                    "序号": "47",
                    "解析": "蛰虫开始在洞穴中筑巢，预示着秋季农事开始",
                    "故事线": [
                        "子：蛰虫坯户时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["水始涸": [
                    "序号": "48",
                    "解析": "水开始干涸，预示着秋季农事开始",
                    "故事线": [
                        "子：水始涸时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "寒露": [
                "初候": ["鸿雁来宾": [
                    "序号": "49",
                    "解析": "鸿雁开始飞来，预示着秋季农事开始",
                    "故事线": [
                        "子：鸿雁来宾时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["雀入大水为蛤": [
                    "序号": "50",
                    "解析": "雀入大水为蛤，预示着秋季农事开始",
                    "故事线": [
                        "子：雀入大水为蛤时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["菊有黄华": [
                    "序号": "51",
                    "解析": "菊有黄华，预示着秋季农事开始",
                    "故事线": [
                        "子：菊有黄华时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "霜降": [
                "初候": ["豺乃祭兽": [
                    "序号": "52",
                    "解析": "豺开始祭兽，预示着秋季农事开始",
                    "故事线": [
                        "子：豺乃祭兽时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["草木黄落": [
                    "序号": "53",
                    "解析": "草木开始黄落，预示着秋季农事开始",
                    "故事线": [
                        "子：草木黄落时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["蛰虫咸俯": [
                    "序号": "54",
                    "解析": "蛰虫开始咸俯，预示着秋季农事开始",
                    "故事线": [
                        "子：蛰虫咸俯时，秋意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "立冬": [
                "初候": ["水始冰": [
                    "序号": "55",
                    "解析": "水开始结冰，预示着冬季农事开始",
                    "故事线": [
                        "子：水始冰时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["地始冻": [
                    "序号": "56",
                    "解析": "地开始结冰，预示着冬季农事开始",
                    "故事线": [
                        "子：地始冻时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["雉入大水为蜃": [
                    "序号": "57",
                    "解析": "雉入大水为蜃，预示着冬季农事开始",
                    "故事线": [
                        "子：雉入大水为蜃时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "小雪": [
                "初候": ["虹藏不见": [
                    "序号": "58",
                    "解析": "虹藏不见，预示着冬季农事开始",
                    "故事线": [
                        "子：虹藏不见时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["天气上腾地气下降": [
                    "序号": "59",
                    "解析": "天气上腾，地气下降，预示着冬季农事开始",
                    "故事线": [
                        "子：天气上腾时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["闭塞而成冬": [
                    "序号": "60",
                    "解析": "闭塞而成冬，预示着冬季农事开始",
                    "故事线": [
                        "子：闭塞而成冬时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "大雪": [
                "初候": ["鹃鸥不鸣": [
                    "序号": "61",
                    "解析": "鹃鸥不鸣，预示着冬季农事开始",
                    "故事线": [
                        "子：鹃鸥不鸣时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["虎始交": [
                    "序号": "62",
                    "解析": "虎开始交配，预示着冬季农事开始",
                    "故事线": [
                        "子：虎始交时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["荔挺出": [
                    "序号": "63",
                    "解析": "荔挺出，预示着冬季农事开始",
                    "故事线": [
                        "子：荔挺出时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "冬至": [
                "初候": ["蚯蚓结": [
                    "序号": "64",
                    "解析": "蚯蚓结，预示着冬季农事开始",
                    "故事线": [
                        "子：蚯蚓结时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["麋角解": [
                    "序号": "65",
                    "解析": "麋角解，预示着冬季农事开始",
                    "故事线": [
                        "子：麋角解时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["水泉动": [
                    "序号": "66",
                    "解析": "水泉动，预示着冬季农事开始",
                    "故事线": [
                        "子：水泉动时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "小寒": [
                "初候": ["雁北乡": [
                    "序号": "67",
                    "解析": "雁北乡，预示着冬季农事开始",
                    "故事线": [
                        "子：雁北乡时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["鹊始巢": [
                    "序号": "68",
                    "解析": "鹊始巢，预示着冬季农事开始",
                    "故事线": [
                        "子：鹊始巢时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["雉始雊": [
                    "序号": "69",
                    "解析": "雉开始鸣叫，预示着冬季农事开始",
                    "故事线": [
                        "子：雉始雊时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ],
            "大寒": [
                "初候": ["鸡始乳": [
                    "序号": "70",
                    "解析": "鸡开始产蛋，预示着冬季农事开始",
                    "故事线": [
                        "子：鸡始乳时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "次候": ["征鸟厉疾": [
                    "序号": "71",
                    "解析": "征鸟厉疾，预示着冬季农事开始",
                    "故事线": [
                        "子：征鸟厉疾时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]],
                "末候": ["水泽腹坚": [
                    "序号": "72",
                    "解析": "水泽腹坚，预示着冬季农事开始",
                    "故事线": [
                        "子：水泽腹坚时，冬意渐浓时",
                        "丑：春深农事忙，万物竞生长",
                        "寅：时节催新变，春光暖四方",
                        "卯：布谷声声催，春耕莫迟疑",
                        "辰：时节催人进，春耕莫迟疑"
                    ]
                ]]
            ]
        ]
        
        
        // 获取对应节气的末侯信息
        if let termPhases = phaseDescs[term],
           let phaseInfo = phase == 1 ? termPhases["初候"] :
            phase == 2 ? termPhases["次候"] :
                phase == 3 ? termPhases["末侯"] : nil,
           let firstPhenomenon = phaseInfo.first,
           let details = firstPhenomenon.value as? [String: Any],
           let number = details["序号"] as? String,
           let analysis = details["解析"] as? String,
           let storyLines = details["故事线"] as? [String] {
            
            return (
                phenomenon: firstPhenomenon.key,
                number: number,
                analysis: analysis,
                storyLines: storyLines
            )
        }
        
        return nil
    }
}
